<!DOCTYPE html>
<html>
<head>
	<title></title>
<link rel="stylesheet" href="/css/threes.css">
<script type="text/javascript">var board = new Array(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)</script>
<script type='text/javascript' src='jquery-1.11.3.js'></script>
<script type="text/javascript">

Array.prototype.max = function() {
  return Math.max.apply(null, this);
};

printArray(board);
seedBoard(48);
genNextNum(board);

function move(board, input) {

}

function seedBoard(maxVal) {
	var emptySet = [0,1,2,3,4,5,6,7,8,9,10,11,12,13,14];
	var array = [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];

	shuffleArray(emptySet);

	// Seed random tiles on the board with 1s, 2s, or 3s
	for (var i = 0; i < 8; i++) {
		array[emptySet[i]] = Math.floor(Math.random(1,3) * 3 + 1);
	}

	// Seed the last tile with the maxVal
	array[15] = maxVal;

	// Print the board
	replaceArray(array);
}

function replaceArray(array) {
	for (i=0; i<16; i++) {
		if (array[i] === 0) {
			document.getElementById("cell" + i).innerHTML = "<br />";
		}
		else {
			document.getElementById("cell" + i).innerHTML = array[i];
		}
		document.getElementById("cell" + i).className = "cell";

		var id = document.getElementById("cell" + i);
		switch (array[i]) {
			case 0:
				break;
			case 1:
				id.className = id.className + " one";
				break;
			case 2:
				id.className = id.className + " two";
				break;
			default:
				id.className = id.className + " number";
				break;

		}
	}
}

function printArray(array) {
	document.write("<div class='row'>");
	for (i=0; i<16; i++) {
		if (i%4 == 0 && i > 1) {
			document.write("</div><div class='row'>");
		}
		if (array[i] === 0) {
			document.write("<span class='cell' id=cell" + i + "><br /></span>");
		}
		else {
			document.write("<span class='cell' id=cell" + i + ">" + array[i] + "</span>");
		}

		var id = document.getElementById("cell" + i);
		switch (array[i]) {
			case 0:
				break;
			case 1:
				id.className = id.className + " one";
				break;
			case 2:
				id.className = id.className + " two";
				break;
			default:
				id.className = id.className + " number";
				break;

		}
	}
	document.write("</div>");
}

function shuffleArray(array) {
	var i = array.length - 1;
	for (; i > 0; i--) {
		var j = Math.floor(Math.random() * (i + 1));
		var temp = array[i];
		array[i] = array[j];
		array[j] = temp;
	}
	return array;
}

function genNextNum (array) {
	var nextNum, randVal,
	maxVal = array.max.apply(null, array) / 4,
	addVal = 3,
	boardValues = [1,2,3],
	chance = Math.floor(Math.random()*10 + 1),

	while ((addVal < maxVal) && (maxVal > 3)) {
		addVal = boardValues.max * 2;
		boardValues.push(addVal);
	}

	if (chance <= 25) {
		randVal = 0;
	}
	else if (chance <= 50) {
		randVal = 1;
	}
	else if (chance <= 90) {
		randVal = 2;
	}
	else {
		randVal = Math.floor(Math.random() * array.count() + 1);
	}
	console.log("MaxVal: " + maxVal + "addVal: " + addVal + "ArrayMax: " + array.max);
	console.log(randVal);

}

</script>
</head>

<body>
<div class="buttons">
<div class="btn-grp">
<button type="button" name="up" value="up" onclick="move(board,'up')">Up</button>
<button type="button" name="right" value="right" onclick="move(board,'right')">Right</button>
<button type="button" name="down" value="down" onclick="move(board,'down')">Down</button>
<button type="button" name="left" value="left" onclick="move(board,'left')">Left</button>
</div>
<div class="new-game">
<button type="button" name="seedBoard" value="seedBoard" onclick="seedBoard(48)">New Game</button>
</div>
</div>
</body>
</html>
